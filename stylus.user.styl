/* ==UserStyle==
@name         Dark Stylus by Mew
@version      0.1.0
@author       vednoc
@description  Dark theme for Stylus, the extension.
@namespace    gitlab.com/vednoc/dark-stylus
@homepageURL  https://gitlab.com/vednoc/dark-stylus
@supportURL   https://gitlab.com/vednoc/dark-stylus/issues
@updateURL    https://gitlab.com/vednoc/dark-stylus/raw/master/stylus.user.styl
@preprocessor stylus

@var text b_radius "Custom border radius" 4px

@var color dark    "Dark color.   " #222222
@var color darker  "Darker color. " #2f2f2f
@var color light   "Light color.  " #d1d1d1
@var color lighter "Lighter color." #c9c9c9
@var color icon    "Icon color.   " #e1e1e1
@var color accent  "Accent color. " #7289da
@var color yellow  "Yellow color. " #f0c674
@var color orange  "Orange color. " #de935f
@var color red     "Red color.    " #a54242
@var color magenta "Magenta color." #b294bb
@var color violet  "Violet color. " #85678f
@var color blue    "Blue color.   " #5f819d
@var color cyan    "Cyan color.   " #5e8d87
@var color green   "Green color.  " #8c9440
@var color white   "White color.  " #ffffff
@var color shadow  "Shadow color. " #00000020

==/UserStyle== */

@-moz-document regexp('^(moz|chrome)-extension://.*$')
    :root
        --dark    dark
        --darker  darker
        --light   light
        --lighter lighter
        --accent  accent
        --icon    icon
        --shadow  shadow
        --yellow  yellow
        --orange  orange
        --red     red
        --magenta magenta
        --violet  violet
        --blue    blue
        --cyan    cyan
        --green   green
        --white   white
        --t       transparent !important
        --radius  b_radius
        scrollbar-color: var(--darker) var(--dark)

    $dark    = var(--dark)
    $darker  = var(--darker)
    $light   = var(--light)
    $lighter = var(--lighter)
    $icon    = var(--icon)
    $accent  = var(--accent)
    $shadow  = var(--shadow)
    $yellow  = var(--yellow)
    $orange  = var(--orange)
    $red     = var(--red)
    $magenta = var(--magenta)
    $violet  = var(--violet)
    $blue    = var(--blue)
    $cyan    = var(--cyan)
    $green   = var(--green)
    $green   = var(--green)
    $white   = var(--white)
    $t       = var(--t)
    $radius  = var(--radius)
    $buttons = calc(var(--radius) / 2)

    // * Colors mixin.
    colors(x y z)
        if x is a 'call'
            color x !important
        if y is a 'call'
            border-color y !important
        if z is a 'call'
            background-color z !important

    // * Border radius mixin.
    radius()
        border-radius arguments

    body
        colors $lighter 0 $dark
        a
            transition 0.15s ease
            colors $light 0 0
            &:hover
                colors $accent 0 0
        input[type="checkbox"]:not(.slider)
            transition 0.15s ease
            colors 0 $lighter 0
            &:hover
                colors 0 $lighter $lighter
            &.checked, &:checked
                colors 0 $lighter 0
                + .svg-icon.checked
                    fill $accent !important
            &.disabled, &:disabled
                opacity 0.5
                colors 0 $lighter 0
                + .svg-icon.checked
                    opacity 0.5
                    fill $lighter !important
                    + span
                        colors $lighter 0 0
        select
            transition 0.15s ease
            colors $light $darker $dark
            box-shadow 0 2px 4px 0 inset $shadow
            + .svg-icon
                fill $light !important
            option
                colors $light 0 $dark
        input:not(.slider), button
            border 1px solid
            transition 0.15s ease
            background none
            colors $lighter $darker $dark
            box-shadow 0 2px 4px 0 inset $shadow
            &:hover, &:focus
                colors $light 0 $darker

        // ? UserCSS -> reset header's height.
        .has-warnings #header
            min-height unset
            max-height 40px

    // * Dropdowns.
    .dropdown
        .dropdown-content
            radius $radius
            colors $lighter 0 $dark
            box-shadow 0 4px 8px 0 $shadow, 0 0 0 1px $darker !important
            a:first-child
                radius $radius $radius 0 0
            a:last-child
                radius 0 0 $radius $radius
            a:hover
                colors $light 0 $darker

    #header
        colors $lighter $darker $dark
        box-shadow 0 0 16px 0 $shadow
        h1, summary
            colors $light 0 0
        @media (min-width: 850px)
            border-right-style solid
        @media (max-width: 850px)
            border-bottom-style solid
            transition 0.15s ease
            max-height 40px
            &:hover
                max-height 300px

    #stylus-popup
        .entry
            // Striped colors.
            &:nth-child(even)
                colors 0 0 $t
                background linear-gradient(90deg, $darker -100%, $t)
            // Style position.
            &:nth-child(-n + 10):before, &:nth-child(11):before
                colors $lighter 0 0
            &:hover
                background linear-gradient(90deg, $darker, $t)
        .style-name::before
            z-index -1
            transition 0.15s ease
            background none

    // * UserCSS warnings.
    .warnings
        padding 0.5rem
        border 1px dashed
        colors 0 $red $dark
        // TODO: Custom setting.
        @media (max-width: 850px)
            max-height 30vh !important

    // * UserCSS popup.
    #message-box
        colors 0 0 $t
        // Backdrop.
        &::before
            content ""
            top 0
            left 0
            right 0
            bottom 0
            z-index -1
            position absolute
            colors 0 0 $darker
            opacity 0.8
        // Wrapper element.
        > div
            radius $radius
            colors 0 0 $t
            box-shadow 0 0 0 1px $darker, 0 2px 8px -1px $shadow
        // Header.
        &-title
            radius $radius $radius 0 0
            padding: 0.75rem 2rem
            colors 0 0 $darker
            // Logo.
            &::before
                padding: 0 16px 16px 0
                background-size cover
        // Body.
        &-contents
            colors 0 0 $dark
            // * On/off switches.
            .onoffswitch
                > span
                    colors 0 0 $darker
                    box-shadow 0 2px 4px 0 inset $shadow
                    &::before
                        transition 0.15s ease
                        colors 0 0 $dark
                        box-shadow inset 0 0 8px -4px $accent, 0 2px 4px -1px $shadow
                > input:checked + span::before
                    colors 0 0 $accent
                    box-shadow 0 0 4px 2px inset $shadow
        // Footer.
        &-buttons
            colors $lighter 0 $dark
            radius 0 0 $radius $radius
            box-shadow 0 1px 0 0 inset $darker
            button
                padding 0.4rem
                radius $buttons
                transition 0.15s ease
                background-image none
                colors $lighter $darker $dark
                &:hover
                    colors $light 0 $darker

// Fix white page for UserCSS files.
@-moz-document regexp('^file://.*\.user\.(css|styl|stylus|less)$')
    :root
        --dark    dark
        --darker  darker
        --light   light
        --lighter lighter
        --accent  accent

    $dark    = var(--dark)
    $darker  = var(--darker)
    $light   = var(--light)
    $lighter = var(--lighter)
    $accent  = var(--accent)

    body
        color $lighter
        background-color $dark
